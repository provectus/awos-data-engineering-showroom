version: 2

models:
  - name: mart_demand_daily
    description: Daily bike demand metrics for business analytics
    columns:
      - name: ride_date
        description: Date of observation
        tests:
          - unique
          - not_null

      - name: trips_total
        description: Total number of trips
        tests:
          - not_null
          - dbt_utils.expression_is_true:
              expression: '> 0'

      - name: member_trips
        description: Number of member trips
        tests:
          - not_null

      - name: casual_trips
        description: Number of casual trips
        tests:
          - not_null

      - name: day_type
        description: Weekday or Weekend
        tests:
          - accepted_values:
              values:
                - Weekday
                - Weekend

  - name: mart_weather_effect
    description: Bike demand enriched with weather data for impact analysis
    columns:
      - name: date
        description: Date of observation
        tests:
          - unique
          - not_null

      - name: trips_total
        description: Total number of trips
        tests:
          - not_null

      - name: temp_category
        description: Categorized temperature range
        tests:
          - accepted_values:
              values:
                - Very Cold
                - Cold
                - Moderate
                - Warm
              config:
                severity: warn

      - name: rain_category
        description: Categorized precipitation level
        tests:
          - accepted_values:
              values:
                - No Rain
                - Light Rain
                - Heavy Rain
              config:
                severity: warn

  - name: mart_station_stats
    description: Station-level statistics for trip analytics and popular station
      identification
    columns:
      - name: station_id
        description: Unique station identifier
        tests:
          - unique
          - not_null

      - name: station_name
        description: Name of the station
        tests:
          - not_null

      - name: start_trip_count
        description: Number of trips starting from this station
        tests:
          - not_null

      - name: end_trip_count
        description: Number of trips ending at this station
        tests:
          - not_null

      - name: total_trip_count
        description: Total trips (starts + ends) for this station
        tests:
          - not_null

      - name: avg_start_duration
        description: Average duration of trips starting from this station

      - name: member_start_trips
        description: Number of member trips starting from this station
        tests:
          - not_null

      - name: casual_start_trips
        description: Number of casual trips starting from this station
        tests:
          - not_null

      - name: member_pct
        description: Percentage of member trips starting from this station
